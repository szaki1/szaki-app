<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8" />
    <title>Megrendelő – Alapadatok | Szaki-App</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #f2f2f2;
            margin: 0;
            padding: 30px 10px;
        }

        .wrap {
            max-width: 900px;
            margin: 0 auto;
            background: #ffffff;
            border-radius: 12px;
            padding: 26px 22px 32px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.06);
        }

        h1 {
            margin: 0 0 8px;
            text-align: center;
        }

        .alcim {
            text-align: center;
            margin: 0 0 20px;
            color: #555;
        }

        .szekcio-cim {
            font-size: 18px;
            font-weight: bold;
            margin: 22px 0 10px;
        }

        .mezo-csoport {
            margin-bottom: 16px;
        }

        label {
            display: block;
            font-weight: bold;
            margin-bottom: 4px;
        }

        label span.kotelezo {
            color: #e53935;
            font-weight: normal;
            font-size: 13px;
            margin-left: 4px;
        }

        input[type="text"],
        input[type="email"],
        input[type="tel"],
        input[type="date"],
        select {
            width: 100%;
            padding: 10px 12px;
            border-radius: 6px;
            border: 1px solid #ccc;
            font-size: 14px;
            box-sizing: border-box;
        }

        .info-szoveg {
            font-size: 13px;
            color: #777;
            margin-top: 4px;
        }

        .fo-gomb {
            background: #f57c00;
            color: #fff;
            border: none;
            border-radius: 8px;
            padding: 14px 24px;
            font-size: 16px;
            cursor: pointer;
            width: 100%;
            margin-top: 18px;
        }

        .fo-gomb:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        @media (max-width: 600px) {
            .wrap {
                padding: 20px 14px 24px;
            }
        }
    </style>
</head>

<body>

<div class="wrap">
    <h1>Megrendelő – 1. lépés</h1>
    <p class="alcim">Add meg az alapadatokat, utána jön a munka részletes leírása.</p>

    <!-- 1. Kapcsolati adatok -->
    <div class="szekcio-cim">1. Kapcsolati adatok</div>

    <div class="mezo-csoport">
        <label for="nev">Neved <span class="kotelezo">(kötelező)</span></label>
        <input type="text" id="nev" placeholder="Pl.: Kovács Péter" />
    </div>

    <div class="mezo-csoport">
        <label for="elerhetoseg">Telefonszám vagy e-mail <span class="kotelezo">(kötelező)</span></label>
        <input type="text" id="elerhetoseg" placeholder="Pl.: +36 30 123 4567 vagy valami@valami.hu" />
        <div class="info-szoveg">
            Ez az adat csak a kiválasztott szakembereknek jelenik meg.
        </div>
    </div>

    <!-- 2. Helyszín -->
    <div class="szekcio-cim">2. A munka helyszíne</div>

    <div class="mezo-csoport">
        <label for="varos">Város / kerület <span class="kotelezo">(kötelező)</span></label>
        <input type="text" id="varos" placeholder="Pl.: Budapest II. kerület" />
    </div>

    <div class="mezo-csoport">
        <label for="cim">Pontos cím (nem kötelező, elég körülbelül)</label>
        <input type="text" id="cim" placeholder="Pl.: Szilágyi Erzsébet fasor környéke" />
    </div>

    <!-- 3. Keresett szakma -->
    <div class="szekcio-cim">3. Keresett szakma</div>

    <div class="mezo-csoport">
        <label for="szakma">Választott fő szakma <span class="kotelezo">(kötelező)</span></label>
        <select id="szakma">
            <option value="">Válassz szakmát…</option>
        </select>
        <div class="info-szoveg">
            A 2. lépésben megadhatsz több szakmát is (burkoló + víz + villany, stb.).
        </div>
    </div>

    <!-- 4. Időzítés -->
    <div class="szekcio-cim">4. Mikor szeretnéd a munkát?</div>

    <div class="mezo-csoport">
        <label for="kezdesMin">Leghamarabb kezdhető</label>
        <input type="date" id="kezdesMin">
    </div>

    <div class="mezo-csoport">
        <label for="kezdesMax">Legkésőbb elkezdhető</label>
        <input type="date" id="kezdesMax">
    </div>

    <div class="mezo-csoport">
        <label for="hatarido">Végső határidő</label>
        <input type="date" id="hatarido">
    </div>

    <!-- 5. Munka nagysága -->
    <div class="szekcio-cim">5. A munka nagysága</div>

    <div class="mezo-csoport">
        <label for="meret">Körülbelüli méret</label>
        <select id="meret">
            <option value="">Nem tudom pontosan</option>
            <option value="Kisebb javítás / 1 helyiség">Kisebb javítás / 1 helyiség</option>
            <option value="Több helyiség, részleges felújítás">Több helyiség, részleges felújítás</option>
            <option value="Nagyobb munka, komplett fürdő / konyha">Nagyobb munka, komplett fürdő / konyha</option>
            <option value="Teljes lakásfelújítás (80–130 m²)">Teljes lakásfelújítás (80–130 m²)</option>
        </select>
    </div>

    <!-- Gomb -->
    <button class="fo-gomb" id="tovabb-gomb" disabled>
        Tovább a munka részleteihez
    </button>
</div>

<script>
    // Ugyanaz a szakmalista, mint a 2. lépésen
    const SZAKMAK = [
        "Kőműves",
        "Szobafestő-tapétázó",
        "Burkoló",
        "Hidegburkoló",
        "Melegburkoló",
        "Villanyszerelő",
        "Vízszerelő",
        "Gázszerelő",
        "Fűtésszerelő",
        "Gipszkartonos",
        "Klímaszerelő"
    ];

    function toltsdFelSzakmaSelectet() {
        const sel = document.getElementById("szakma");
        SZAKMAK.forEach(s => {
            const opt = document.createElement("option");
            opt.value = s;
            opt.textContent = s;
            sel.appendChild(opt);
        });
    }

    // Visszatöltés localStorage-ból
    function visszatoltes() {
        const map = [
            "nev",
            "elerhetoseg",
            "varos",
            "cim",
            "kezdesMin",
            "kezdesMax",
            "hatarido",
            "meret",
            "szakma"
        ];

        map.forEach(id => {
            const el = document.getElementById(id);
            const val = localStorage.getItem("mr_" + id);
            if (val && el) el.value = val;
        });
    }

    // Mentés localStorage-be
    function initMezokMentese() {
        const map = [
            "nev",
            "elerhetoseg",
            "varos",
            "cim",
            "kezdesMin",
            "kezdesMax",
            "hatarido",
            "meret",
            "szakma"
        ];

        map.forEach(id => {
            const el = document.getElementById(id);
            if (!el) return;

            const key = "mr_" + id;

            el.addEventListener("input", () => {
                localStorage.setItem(key, el.value);
                ellenorizKotelezo();
            });

            el.addEventListener("change", () => {
                localStorage.setItem(key, el.value);
                ellenorizKotelezo();
            });
        });
    }

    // Kötelező mezők ellenőrzése
    function ellenorizKotelezo() {
        const nev   = document.getElementById("nev").value.trim();
        const eler  = document.getElementById("elerhetoseg").value.trim();
        const varos = document.getElementById("varos").value.trim();
        const szakma = document.getElementById("szakma").value;
        const gomb = document.getElementById("tovabb-gomb");

        gomb.disabled = !(nev && eler && varos && szakma);
    }

    // Tovább a 2. lépésre
    function initTovabbGomb() {
        const gomb = document.getElementById("tovabb-gomb");
        gomb.addEventListener("click", () => {
            window.location.href = "munka-reszletei.html";
        });
    }

    document.addEventListener("DOMContentLoaded", () => {
        toltsdFelSzakmaSelectet();
        visszatoltes();
        initMezokMentese();
        ellenorizKotelezo();
        initTovabbGomb();
    });
</script>

</body>
</html>
