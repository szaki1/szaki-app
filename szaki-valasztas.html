<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <title>Szakember v√°laszt√°sa ‚Äì SzakiChat</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
</head>

<body>

<header>Szakember v√°laszt√°sa</header>

<div class="container">

    <!-- Megrendel≈ë adatai + v√°lasztott szakma -->
    <div class="box" id="infoBox"></div>

    <!-- Megoszt√°si figyelmeztet√©s -->
    <div class="box" style="background:#fff4e6;">
        <b>A szakik el√©rhet≈ës√©ge z√°rolva!</b><br><br>
        Oszd meg az oldalt legal√°bb <b>5 alkalommal</b> a felold√°shoz.
        <br><br>
        Jelenlegi megoszt√°sok: <span id="shareCount">0</span> / 5
        <br><br>
        <button class="btn" id="shareBtn">Megosztom</button>
    </div>

    <!-- Rekl√°m -->
    <div class="ads-box">
        üî∂ Rekl√°m hely ‚Äì Google Ads vagy banner
    </div>

    <!-- SZAKI LISTA -->
    <div id="szakiLista"></div>

</div>

<!-- ‚ù§Ô∏è T√ÅMOGAT√ì GOMB -->
<div id="supportFloatingBtn"
     onclick="window.open('https://www.paypal.com/donate/?hosted_button_id=QGU3WXVSCH22A','_blank')">
    <span class="heart">‚ù§Ô∏è</span> T√°mogasd a SzakiChat-et
</div>


<script>
// ========================================
// PARAM√âTEREK: szakma
// ========================================
const params = new URLSearchParams(window.location.search);
const szakma = params.get("szakma") || localStorage.getItem("mr_szakma") || "";

if (!szakma) {
    alert("Hi√°nyzik a szakma!");
    location.href = "szakma-valasztas.html";
}

// Megrendel≈ë info a fejl√©cdobozba
document.getElementById("infoBox").innerHTML =
    `<b>Keresett szakma:</b> ${szakma}<br>
     <small>A k√∂vetkez≈ë szakik √©rhet≈ëk el:</small>`;


// ========================================
// √ÅLSZAKIK + VAL√ìDI SZAKIK
// ========================================
const realSzakik = [
    { name: "Csabi", szakma: "Fest≈ë", phone:"+36 20 111 2233" },
    { name: "Zsolti", szakma: "Villanyszerel≈ë", phone:"+36 30 999 4455" }
];

const fakeNames = ["P√©ter", "Attila", "Jani", "G√°bor", "Tam√°s"];
const fakeSzakik = fakeNames.map(n => ({
    name: n,
    szakma: szakma,
    phone: "+36 ** *** **"
}));

// teljes lista = 2 val√≥di + 5 √°lszaki
let allWorkers = [...realSzakik, ...fakeSzakik];


// ========================================
// MEGOSZT√ÅSKORL√ÅT
// ========================================
let shareCount = Number(localStorage.getItem("shareCount") || 0);
document.getElementById("shareCount").innerText = shareCount;

document.getElementById("shareBtn").onclick = () => {
    shareCount++;
    localStorage.setItem("shareCount", shareCount);
    document.getElementById("shareCount").innerText = shareCount;

    alert("K√∂sz√∂nj√ºk a megoszt√°st!");

    renderList();
};


// ========================================
// SZAKI LISTA KIRAJZOL√ÅS
// ========================================
function renderList() {
    const cont = document.getElementById("szakiLista");
    cont.innerHTML = "";

    allWorkers.forEach(sz => {
        const box = document.createElement("div");
        box.className = "box";

        const locked = shareCount < 5;

        box.innerHTML = `
            <h3>${sz.name}</h3>
            <div><b>Szakma:</b> ${sz.szakma}</div>

            <div style="margin-top:8px;">
                <b>El√©rhet≈ës√©g:</b>
                ${locked ? "<span style='color:red;'>üóù Z√°rolva</span>" : sz.phone}
            </div>

            <button class="btn" style="margin-top:12px;"
                onclick="openChat('${sz.name}')">
                Chat ind√≠t√°sa
            </button>
        `;

        cont.appendChild(box);
    });
}

renderList();


// ========================================
// CHAT MEGNYIT√ÅSA
// ========================================
function openChat(name) {
    window.location.href =
        "chat.html?partner=" + encodeURIComponent(name);
}
</script>

</body>
</html>
